{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents an administrative user of the AISaaS Explorer platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "username": {
          "type": "string",
          "description": "The user's username."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "The user's first name."
        },
        "lastName": {
          "type": "string",
          "description": "The user's last name."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "username",
        "email",
        "firstName",
        "lastName",
        "createdAt",
        "updatedAt"
      ]
    },
    "Post": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Post",
      "type": "object",
      "description": "Represents a blog post about an AI SaaS product.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the post."
        },
        "title": {
          "type": "string",
          "description": "The title of the blog post."
        },
        "content": {
          "type": "string",
          "description": "The main content of the blog post, formatted in Markdown."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to the author of the post. (Relationship: User 1:N Post)"
        },
        "authorName": {
          "type": "string",
          "description": "The name of the post's author, denormalized for performance."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to the category of the post. (Relationship: Category 1:N Post)"
        },
        "imageUrl": {
          "type": "string",
          "description": "Data URI for the post's featured image.",
          "format": "uri"
        },
        "status": {
          "type": "string",
          "description": "The publishing status of the post.",
          "enum": [
            "draft",
            "published"
          ]
        },
        "publishDate": {
          "type": "string",
          "description": "The date and time when the post is scheduled to be published.",
          "format": "date-time"
        },
        "videoUrl": {
          "type": "string",
          "description": "URL for an embedded video tutorial related to the post.",
          "format": "uri"
        },
        "affiliateLinks": {
          "type": "array",
          "description": "A list of affiliate links related to the post.",
          "items": {
            "type": "object",
            "properties": {
              "text": {
                "type": "string",
                "description": "The display text for the link."
              },
              "url": {
                "type": "string",
                "description": "The destination URL for the link.",
                "format": "uri"
              }
            },
            "required": [
              "text",
              "url"
            ]
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the post was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the post was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "authorId",
        "authorName",
        "categoryId",
        "status",
        "createdAt",
        "updatedAt"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category for blog posts.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the category."
        },
        "name": {
          "type": "string",
          "description": "The name of the category."
        },
        "description": {
          "type": "string",
          "description": "A description of the category."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the category was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the category was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "createdAt",
        "updatedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores administrative user profiles. Only accessible to authenticated admins.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "AdminRole",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Collection to store admin user roles. The existence of a document with a user's ID grants admin privileges.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user who is an admin."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores categories for blog posts. Accessible only to authenticated admins.",
          "params": [
            {
              "name": "categoryId",
              "description": "The unique identifier of the category."
            }
          ]
        }
      },
      {
        "path": "/posts/{postId}",
        "definition": {
          "entityName": "Post",
          "schema": {
            "$ref": "#/backend/entities/Post"
          },
          "description": "Stores blog posts. Accessible only to authenticated admins.",
          "params": [
            {
              "name": "postId",
              "description": "The unique identifier of the blog post."
            }
          ]
        }
      },
      {
        "path": "/admin_check/{userId}",
        "definition": {
          "entityName": "AdminCheck",
          "schema": {
            "type": "object",
            "properties": {
              "status": {
                "type": "boolean"
              }
            }
          },
          "description": "A collection used by the client to verify if a user has admin privileges. The client attempts to read a document from this collection; if the read succeeds, the user is an admin. The document ID should be the user's UID. The document itself can be empty.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user to check."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to manage blog posts and categories for the AISaaS Explorer application. It emphasizes authorization independence, clarity, and scalability.  Authorization Independence is achieved via path-based ownership for posts and categories (accessible only to admins), and explicit collections for admin roles. This eliminates the need for `get()` calls in security rules. Structural Segregation isolates data with different security postures (admin data vs. other data).  Access Modeling uses path-based ownership and existence-based global roles.  QAPs are supported by segregating user-generated content and admin-controlled data into separate collections. A dedicated /admin_check collection is added to allow clients to securely verify admin status without exposing role data. Affiliate links are stored as an array within each post document to simplify data management."
  }
}
